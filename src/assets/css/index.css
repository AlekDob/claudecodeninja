@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* CSS Variables for theme support */
  :root {
    /* Light mode (default) */
    --bg-primary: #ffffff;
    --bg-secondary: #f8fafc;
    --bg-tertiary: #f1f5f9;
    --text-primary: #0f172a;
    --text-secondary: #64748b;
    --text-tertiary: #94a3b8;
    --border-color: rgba(15, 23, 42, 0.1);
    --border-subtle: rgba(15, 23, 42, 0.05);
  }

  .dark {
    /* Dark mode */
    --bg-primary: #111827;
    --bg-secondary: #1e293b;
    --bg-tertiary: #334155;
    --text-primary: #f8fafc;
    --text-secondary: #cbd5e1;
    --text-tertiary: #94a3b8;
    --border-color: rgba(255, 255, 255, 0.1);
    --border-subtle: rgba(255, 255, 255, 0.05);
  }

  body {
    @apply font-sans antialiased;
    background: var(--bg-primary);
    color: var(--text-primary);
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  h1 {
    @apply text-2xl md:text-3xl font-bold tracking-tight leading-tight;
  }

  h2 {
    @apply text-xl md:text-2xl font-bold tracking-tight leading-tight;
  }

  h3 {
    @apply text-lg md:text-xl font-semibold leading-tight;
  }

  code {
    @apply font-mono px-1.5 py-0.5 rounded text-xs border border-white/10;
    background: rgba(30, 41, 59, 0.5);
  }

  pre {
    @apply font-mono p-3 rounded-lg overflow-x-auto border border-white/10 text-xs;
    background: rgba(30, 41, 59, 0.5);
    line-height: 1.5;
  }

  pre code {
    @apply p-0 border-0 text-xs;
    background: transparent;
  }

  /* Focus visible for accessibility */
  :focus-visible {
    @apply outline-none ring-2 ring-offset-2 rounded;
    --tw-ring-color: #3b82f6;
    ring-offset-color: #1e293b;
  }

  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
  }

  /* Screen reader only */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }
}

@layer components {
  /* Glass Card Effect (AgentVoice-inspired) */
  .glass-card {
    @apply bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .glass-card:hover {
    @apply border-white/30;
    transform: translateY(-4px);
    box-shadow: 0 12px 48px rgba(0, 0, 0, 0.15);
  }

  /* Shadow Glow */
  .shadow-glow {
    box-shadow: 0 0 40px rgba(102, 126, 234, 0.4);
  }

  .shadow-glow-lg {
    box-shadow: 0 0 60px rgba(102, 126, 234, 0.6);
  }

  /* Badge Glow */
  .badge-glow {
    box-shadow: 0 0 20px rgba(255, 215, 155, 0.4);
    animation: badgeGlow 2s ease-in-out infinite;
  }

  /* Button Variants */
  .btn-primary {
    @apply px-6 py-3 rounded-full font-semibold text-white;
    @apply transition-all duration-200;
    background: #3b82f6;
    box-shadow: 0 4px 6px rgba(59, 130, 246, 0.25);
  }

  .btn-primary:hover {
    background: #2563eb;
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(59, 130, 246, 0.35);
  }

  .btn-secondary {
    @apply bg-transparent px-6 py-3 rounded-full font-semibold;
    @apply transition-all duration-200;
    color: #3b82f6;
    border: 2px solid #3b82f6;
  }

  .btn-secondary:hover {
    background: #3b82f6;
    color: white;
  }

  .btn-ghost {
    @apply bg-transparent px-4 py-2 rounded-lg font-medium;
    @apply transition-all duration-200;
    color: #64748b;
  }

  .btn-ghost:hover {
    background: rgba(59, 130, 246, 0.1);
    color: #3b82f6;
  }

  /* Status Badges */
  .badge-locked {
    @apply px-3 py-1 rounded-lg text-xs font-semibold uppercase tracking-wide;
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
    border: 1px solid rgba(239, 68, 68, 0.3);
  }

  .badge-unlocked {
    @apply px-3 py-1 rounded-lg text-xs font-semibold uppercase tracking-wide;
    background: rgba(59, 130, 246, 0.1);
    color: #3b82f6;
    border: 1px solid rgba(59, 130, 246, 0.3);
  }

  .badge-completed {
    @apply px-3 py-1 rounded-lg text-xs font-semibold uppercase tracking-wide;
    background: rgba(16, 185, 129, 0.1);
    color: #10b981;
    border: 1px solid rgba(16, 185, 129, 0.3);
  }

  .badge-xp {
    @apply text-white px-3 py-1 rounded-full text-sm font-semibold inline-flex items-center gap-1;
    background: linear-gradient(90deg, #ffd89b 0%, #19547b 100%);
  }

  /* Milestone States */
  .milestone-locked {
    @apply opacity-50 cursor-not-allowed;
  }

  .milestone-completed {
    @apply border-2;
    border-color: #10b981;
  }

  .milestone-in-progress {
    @apply border-2;
    border-color: #f97316;
    box-shadow: 0 0 20px rgba(249, 115, 22, 0.4);
  }

  /* Progress Bar */
  .progress-container {
    @apply bg-white/10 h-2 rounded-full overflow-hidden;
  }

  .progress-fill {
    @apply h-full rounded-full;
    background: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 100%);
    transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Featured Card (Premium milestones) */
  .featured-card {
    @apply rounded-2xl p-8 text-white relative overflow-hidden;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    box-shadow: 0 0 40px rgba(102, 126, 234, 0.4);
  }

  /* Compact Prose Styles (Markdown Content) */
  .prose-compact {
    @apply leading-relaxed;
    color: var(--text-secondary);
    max-width: 65ch; /* Optimal line length for readability */
  }

  .prose-compact h1 {
    @apply text-2xl font-bold mb-4 mt-6;
    color: var(--text-primary);
  }

  .prose-compact h2 {
    @apply text-2xl md:text-3xl font-bold mb-6 mt-12 pb-3 border-b-2;
    color: #FF6B35; /* Primary brand orange for chapter headings */
    border-color: rgba(255, 107, 53, 0.2);
    scroll-margin-top: 100px; /* Account for fixed header (64px) + buffer */
  }

  .prose-compact h3 {
    @apply text-lg md:text-xl font-semibold mb-4 mt-8;
    color: var(--text-primary);
  }

  .prose-compact p {
    @apply text-base mb-4 leading-normal;
    color: var(--text-secondary);
  }

  .prose-compact ul,
  .prose-compact ol {
    @apply mb-4 ml-4 space-y-1;
  }

  .prose-compact li {
    @apply text-base leading-normal;
    color: var(--text-secondary);
  }

  .prose-compact code {
    @apply font-mono px-1.5 py-0.5 rounded text-xs border;
    background: var(--bg-tertiary);
    border-color: var(--border-color);
    color: #06b6d4;
  }

  .prose-compact pre {
    @apply font-mono p-3 rounded-lg overflow-x-auto border mb-4 text-xs;
    background: var(--bg-secondary);
    border-color: var(--border-color);
    line-height: 1.5;
  }

  .prose-compact pre code {
    @apply p-0 border-0 bg-transparent text-xs;
    color: var(--text-secondary);
  }

  .prose-compact strong {
    @apply font-semibold;
    color: var(--text-primary);
  }

  .prose-compact a {
    @apply underline transition-colors;
    color: #3b82f6;
  }

  .prose-compact a:hover {
    color: #2563eb;
  }

  .prose-compact blockquote {
    @apply border-l-4 pl-4 italic my-4;
    border-color: var(--border-color);
    color: var(--text-tertiary);
  }

  .prose-compact hr {
    @apply border-t-2 my-12;
    border-color: rgba(255, 107, 53, 0.15); /* Subtle orange gradient separator */
    background: linear-gradient(90deg, rgba(255, 107, 53, 0.1) 0%, rgba(0, 78, 137, 0.1) 100%);
    height: 2px;
    border: none;
  }

  .prose-compact table {
    @apply w-full border-collapse mb-4;
  }

  .prose-compact th,
  .prose-compact td {
    @apply border px-3 py-2 text-sm;
    border-color: var(--border-color);
  }

  .prose-compact th {
    @apply font-semibold;
    background: var(--bg-tertiary);
    color: var(--text-primary);
  }

  .prose-compact img {
    @apply rounded-lg my-4 max-w-full h-auto;
  }
}

@layer utilities {
  /* Animations */
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes badgeGlow {
    0%,
    100% {
      box-shadow: 0 0 20px rgba(102, 126, 234, 0.4);
    }
    50% {
      box-shadow: 0 0 40px rgba(102, 126, 234, 0.8);
    }
  }

  @keyframes shimmer {
    0% {
      background-position: -1000px 0;
    }
    100% {
      background-position: 1000px 0;
    }
  }

  @keyframes pulse {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* Animation utilities */
  .animate-fade-in {
    animation: fadeIn 0.3s ease-out;
  }

  .animate-slide-up {
    animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .animate-slide-down {
    animation: slideDown 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .animate-pulse-slow {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* Scroll-triggered animations with Intersection Observer */
  .scroll-animate {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }

  .scroll-animate.in-view {
    opacity: 1;
    transform: translateY(0);
  }

  .scroll-animate-scale {
    opacity: 0;
    transform: scale(0.95);
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
  }

  .scroll-animate-scale.in-view {
    opacity: 1;
    transform: scale(1);
  }

  /* Stagger delays for progressive reveal */
  .animate-delay-100 {
    transition-delay: 0.1s;
  }

  .animate-delay-200 {
    transition-delay: 0.2s;
  }

  .animate-delay-300 {
    transition-delay: 0.3s;
  }

  .animate-delay-400 {
    transition-delay: 0.4s;
  }

  /* Shimmer loading skeleton */
  .shimmer {
    background: linear-gradient(
      90deg,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0.3) 50%,
      rgba(255, 255, 255, 0) 100%
    );
    background-size: 1000px 100%;
    animation: shimmer 2s infinite;
  }

  /* Container utilities */
  .container-narrow {
    @apply max-w-4xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  .container-wide {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  /* Gradient text */
  .gradient-text {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }

  .gradient-text-hero {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(90deg, #FF6B35 0%, #FE9140 100%);
  }
}

/* Dark mode specific adjustments */
.dark .glass-card {
  background: rgba(30, 41, 59, 0.5);
  border-color: rgba(148, 163, 184, 0.2);
}

.dark .prose-compact h2 {
  color: #F7931E; /* Slightly warmer orange for dark mode */
  border-color: rgba(247, 147, 30, 0.25);
}

.dark .btn-secondary {
  @apply border-white/20;
  color: #f8fafc;
}

.dark code {
  background: rgba(50, 55, 60, 0.8);
}

/* Responsive typography adjustments */
@media (max-width: 640px) {
  h1 {
    @apply text-xl;
  }

  h2 {
    @apply text-lg;
  }

  h3 {
    @apply text-base;
  }

  .prose-compact h1 {
    @apply text-xl;
  }

  .prose-compact h2 {
    @apply text-2xl mt-8 mb-4; /* Larger on mobile too, with reduced spacing */
  }

  .prose-compact h3 {
    @apply text-lg mt-6; /* Maintain hierarchy */
  }

  .prose-compact p,
  .prose-compact li {
    @apply text-sm;
  }
}

/* Print styles */
@media print {
  .glass-card {
    @apply bg-white border-gray-300;
  }

  body {
    @apply bg-white text-black;
  }
}
